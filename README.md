# UnturnedKitsXMLGenerator
Генератор XML-файла конфигурации наборов (китов) игры Unturned

## Стэк
- Java 21 ([JDK](https://www.oracle.com/java/technologies/javase/jdk21-archive-downloads.html))

## Установка
1. Скачайте [ZIP](https://disk.yandex.ru/d/ySaqu5N0sqdrKw)
2. Распакуйте архив

## Использование
Перейдите в директорию `/items` и создавайте XML-файлы предметов Unturned со следующей структурой:
```XML
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<UnturnedItems>
    <!--В теге Mod указывается название модификации, в которую входят перечисленные предметы-->
    <!--Данный тег необязателен, но он ускорит генерацию XML-файла наборов (китов)-->
    <Mod>ModName</Mod>
    <Items>
        <Item id="101010101" name="ModItem"/>
        <Item id="2" name="Work Jeans"/>
        <Item id="67" name="Metal Scrap"/>
        <Item id="79" name="Canned Tuna"/>
    </Items>
</UnturnedItems>
```
Если вам нужны XML-файлы всех официальных предметов Unturned, воспользуйтесь [этим генератором](https://github.com/LightHerooo/UnturnedItemsXMLGenerator). Сгенерированные файлы будут иметь нужную структуру.

Перейдите в директорию `/kits` и создавайте XML-файлы наборов (китов) Unturned со следующей структурой:
```XML
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Kit>
    <Name>KitName</Name>
    <Items>
        <Item amount="1" name="Work Jeans"/>
        <Item amount="10" name="Metal Scrap"/>
        <Item amount="3" name="Canned Tuna"/>
        
        <!--Если предмет относится к определённой модификации, следует указать её название в атрибуте mod-->
        <!--Важно, чтобы предметы модификации были перечислены в отдельном файле в директории /items, а значение тега <Mod> совпадало со значением атрибута-->
        <!--Данный атрибут необязателен, но он ускорит генерацию XML-файла наборов (китов)-->
        <Item amount="1" mod="ModName" name="ModItem"/>
    </Items>
    <Cooldown>600</Cooldown>
</Kit>
```

Запустите файл `run.bat`

Сгенерированный XML-файл конфигурации наборов (китов) будет находиться по пути `/results/ДЕНЬ.МЕСЯЦ.ГОД (ЧАСЫ-МИНУТЫ-СЕКУНДЫ)`. Директория `/results` появится в директории, где находится `UnturnedKitsXMLGenerator.jar`.

Если вам нужно копировать сгенерированный XML-файл в директорию плагина [Kits](https://github.com/RocketModPlugins/Kits/releases), то вы можете указать путь к этой директории в файле `unturned_kits_xml_generator.properties`.
```DIFF
- PATH_TO_KITS_CONFIGURATION_XML=some\dir\path [НЕПРАВИЛЬНО]
```
```DIFF
+ PATH_TO_KITS_CONFIGURATION_XML=some\\dir\\path [ПРАВИЛЬНО]
```
```DIFF
+ PATH_TO_KITS_CONFIGURATION_XML=some/dir/path [ПРАВИЛЬНО]
```

## Как это работает
Запуск `run.bat` позволяет сгенерировать правильную структуру XML-файла конфигурации наборов (китов) для плагина [Kits](https://github.com/RocketModPlugins/Kits/releases):
```XML
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<KitsConfiguration xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <Kits>
        <Kit>
            <Name>KitName</Name>
            <XP>0</XP>
            <Money xsi:nil="true"/>
            <Vehicle xsi:nil="true"/>
            <Items>
                <Item amount="1" id="2"/>
                <Item amount="10" id="67"/>
                <Item amount="3" id="79"/>
                <Item amount="1" id="101010101"/>
            </Items>
        </Kit>
    </Kits>
</KitsConfiguration>
```
Все созданные XML-файлы наборов (китов) в директории `/kits` объединяются в один файл. Все наименования предметов заменяются на идентификаторы, если предмет был найден в одном из XML-файлов предметов в директории `/items`.

## История создания
Одним прекрасным днём я создавал наборы (киты) для своего сервера игры Unturned. Однако, при использовании стандартного подхода создания наборов (китов), я столкнулся с некоторыми трудностями:
1. **Идентификаторы предметов вместо имён**. По началу это не представляло проблемы, но с ростом количества наборов (китов) и предметов в них, стало сложно ориентироваться, что за предметы лежат в наборе (ките).
```XML
<Item amount="1" id="2"/>
```
2. **Затирание комментариев**. По непонятной мне причине, при запуске сервера, все комментарии в XML-файле конфигурации наборов (китов) затираются, что рушило возможность обхода первой проблемы путём записи названий предметов в комментариях.
```XML
<!-- Work Jeans / Рабочие джинсы [ЗАТИРАЕТСЯ ПРИ СТАРТЕ СЕРВЕРА] -->
<Item amount="1" id="2"/>
```
3. **Конфигурация наборов (китов) в одном файле**. Рост количества наборов (китов) затруднял дальнейший поиск необходимого набора (кита).
```XML
<Kits>
    <Kit></Kit>
    <Kit></Kit>
    <Kit></Kit>
    <!-- Ещё 20+ наборов -->
</Kits>
```
Разработанное приложение решало все проблемы, с которыми я столкнулся, а именно:
1. **Имена вместо идентификаторов**. Значения атрибутов стали более понятными, а замена имён на идентификаторы происходит при генерации.
```XML
<Item amount="1" name="Work Jeans"/>
```
2. **Комментарии**. Так как мы создаём наборы (киты) не через конфигурационный файл, комментарии в наборах (китах) никуда не денутся.
```XML
<!-- Рабочие джинсы -->
<Item amount="1" name="Work Jeans"/>
```
3. **Наборы (киты) в разных файлах**. Теперь поиск конкретных наборов (китов) не составит труда, так как они разделены в директории `/kits`.

## P.S.
Возможно, что мой подход будет занимать немного больше времени для создания наборов (китов), так как необходимо создавать XML-файлы предметов. Однако, вы всегда будете знать, что за предмет вы поместили в набор (кит).

Более того, вы всегда можете воспользоваться [этим генератором](https://github.com/LightHerooo/UnturnedItemsXMLGenerator) для генерации XML-файлов официальных предметов Unturned.

Вас никто не ограничивает в использовании другого языка при указании названий предметов. Так, например, вы можете сделать названия на русском языке:
```XML
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<UnturnedItems>
    <!--В теге Mod указывается название модификации, в которую входят перечисленные предметы-->
    <!--Данный тег необязателен, но он ускорит генерацию XML-файла наборов (китов)-->
    <Mod>ModName</Mod>
    <Items>
        <Item id="101010101" name="Модовый предмет"/>
        <Item id="2" name="Рабочие джинсы"/>
        <Item id="67" name="Металлические пластины"/>
        <Item id="79" name="Консервированный тунец"/>
    </Items>
</UnturnedItems>
```
В таком случае, в наборах (китах) тоже следует использовать русские наименования.
